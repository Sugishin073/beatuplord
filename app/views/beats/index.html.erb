<!-- app/views/beats/index.html.erb -->
<h1>ビート一覧</h1>

<%= link_to "新しいビートを追加", new_beat_path %>

<ul>
  <% @beats.each do |beat| %>
    <li>
      <strong><%= beat.title %></strong><br>
      <% if beat.audio_file.attached? %>
        <!-- カスタムオーディオプレイヤー -->
        <div>
          <button onclick="document.getElementById('audio-<%= beat.id %>').play()"><i class="bi bi-play-btn"></i> 再生</button>
          <button onclick="document.getElementById('audio-<%= beat.id %>').pause()"><i class="bi bi-pause-btn-fill"></i> 停止</button>
        </div>
        <audio id="audio-<%= beat.id %>" style="display: none;">
          <source src="<%= rails_blob_url(beat.audio_file, disposition: "inline") %>" type="<%= beat.audio_file.content_type %>">
          お使いのブラウザはオーディオ再生に対応していません。
        </audio>
      <% else %>
        <p>音声ファイルがありません。</p>
      <% end %>
    </li>
  <% end %>
</ul>